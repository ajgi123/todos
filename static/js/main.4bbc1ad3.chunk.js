(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[0],{121:function(e,t,n){"use strict";var r=n(323),a=n(122),c=n(3);t.a=function(){var e=Object(a.a)();return Object(c.jsx)("div",{className:e.fullpage,children:Object(c.jsx)(r.a,{size:100})})}},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(321),a=Object(r.a)((function(e){return{fullpage:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"}}}))},319:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),o=n.n(c),i=n(376),s=n(329),l=n(55),u=n(374),d=n(375),j=n(167),b=n(15),m=n(3),h=function(e){var t=e.error,n=e.resetErrorBoundary;return Object(m.jsxs)("div",{role:"alert",children:[Object(m.jsx)("p",{children:"Something went wrong:"}),Object(m.jsx)("pre",{children:t.message}),Object(m.jsx)("button",{onClick:n,children:"Try again"})]})},p=n(121),f=n(12),O=n(17),x=n(365),g=n(367),v=n(169),w=n(380),k=n(321),y=n(379),S=n(366),C=n(172),I=n(160),E=n.n(I),T=n(159),P=n.n(T),N=n(158),A=n.n(N),q=n(35),D=Object(k.a)((function(e){return Object(y.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(O.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"})})}));function W(e){var t=D(),n=Object(r.useState)(null),a=Object(f.a)(n,2),c=a[0],o=a[1],i=Object(q.c)(),s=i.isAuthenticated,l=i.userData,u=i.logOutUser,d=null===l||void 0===l?void 0:l.displayName,j=null===l||void 0===l?void 0:l.email,b=Boolean(c),h="primary-search-account-menu",p=Object(m.jsx)(v.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:h,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:function(){o(null)},children:Object(m.jsx)(w.a,{onClick:function(){u(),o(null)},children:"Log out"})});return Object(m.jsxs)("div",{className:t.grow,children:[Object(m.jsx)(x.a,{position:"fixed",color:"default",children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(C.a,{className:t.title,variant:"h6",noWrap:!0,children:"Todo App"}),Object(m.jsx)("div",{className:t.grow}),Object(m.jsxs)("div",{children:[Object(m.jsx)(g.a,{onClick:e.toggleHandler,children:e.isDarkMode?Object(m.jsx)(A.a,{}):Object(m.jsx)(P.a,{})}),s&&Object(m.jsxs)(m.Fragment,{children:[d||j,Object(m.jsx)(g.a,{edge:"end","aria-label":"account of current user","aria-controls":h,"aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:Object(m.jsx)(E.a,{})})]})]})]})}),p]})}var B=n(168),U=n(56),_=function(e,t){var n=Object(r.useCallback)((function(){return U.a.getItem(e,t)}),[e,t]),a=Object(r.useState)(n),c=Object(f.a)(a,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){i(n)}),[n]),Object(r.useEffect)((function(){U.a.setItem(e,o)}),[o,e]),[o,i]},z=function(){var e=_("theme",!1),t=Object(f.a)(e,2),n=t[0],r=t[1],a=n?"dark":"light";return{isDarkMode:n,theme:Object(B.a)({palette:{type:a}}),toggleHandler:function(){r((function(e){return!e}))}}},G=n(381),R=n(371),Q=n(377),Z=n(323),F=n(369),H=n(370),M=n(372),J=n(373),L=n(382),V=n(99),K=n.n(V),X=n(25),Y=n(36),$=n(52),ee=n(33),te=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(10),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ne=Y.a({email:Y.c().email("Enter a valid email").required("Email is required"),password:Y.c().min(8,"Password should be of minimum 8 characters length").required("Password is required")});function re(){var e=te(),t=Object(q.c)(),n=t.loginUser,a=t.status,c=t.userData,o=t.error,i=Object(r.useState)(!1),s=Object(f.a)(i,2),u=s[0],d=s[1],j=Object(b.g)();function h(){d((function(e){return!e}))}return Object(r.useEffect)((function(){a===ee.a.resolved&&c&&(u&&c&&U.a.setItem(q.b,c.refreshToken),j.push("/todos"))}),[a,j,u,c]),Object(m.jsx)(F.a,{component:"main",maxWidth:"xs",children:Object(m.jsxs)("div",{className:e.paper,children:[Object(m.jsx)(G.a,{className:e.avatar,children:Object(m.jsx)(K.a,{})}),Object(m.jsx)(C.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(m.jsx)(X.c,{initialValues:{email:"",password:""},onSubmit:function(e){return t=e.email,r=e.password,void n(t,r);var t,r},validationSchema:ne,children:function(t){return Object(m.jsxs)(X.b,{children:[Object(m.jsx)(X.a,{name:"email",margin:"normal",placeholder:"Email",required:!0,fullWidth:!0,id:"email",label:"Email Address",autoComplete:"email",autoFocus:!0,component:$.a}),Object(m.jsx)(X.a,{name:"password",margin:"normal",placeholder:"password",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"current-password",component:$.a}),Object(m.jsx)(L.a,{title:"Refresh token will be stored in local storage",arrow:!0,children:Object(m.jsx)(H.a,{control:Object(m.jsx)(Q.a,{value:"remember",color:"primary"}),label:"Remember me",value:u,onClick:h})}),Object(m.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:a===ee.a.pending,children:a===ee.a.pending?Object(m.jsx)(Z.a,{}):"Sign In"}),Object(m.jsxs)(M.a,{container:!0,justifyContent:"center",direction:"column",alignItems:"center",children:[a===ee.a.rejected&&Object(m.jsx)(M.a,{item:!0,children:Object(m.jsx)(C.a,{variant:"subtitle1",children:o})}),Object(m.jsx)(M.a,{item:!0,children:Object(m.jsx)(J.a,{variant:"body2",color:"inherit",component:l.b,to:"/signup",children:"Don't have an account? Sign Up"})})]})]})}})]})})}var ae=Y.a({name:Y.c().required("Name is required"),email:Y.c().email("Enter a valid email").required("Email is required"),password:Y.c().min(8,"Password must contain atleast 8 characters").required("Enter your password"),confirmPassword:Y.c().required("Confirm your password").oneOf([Y.b("password")],"Password does not match")}),ce=function(){var e=te(),t=Object(q.c)(),n=t.signUpUser,a=t.status,c=t.error,o=Object(b.g)();return Object(r.useEffect)((function(){a===ee.a.resolved&&o.push("/todos")}),[a,o]),Object(m.jsx)(F.a,{component:"main",maxWidth:"xs",children:Object(m.jsxs)("div",{className:e.paper,children:[Object(m.jsx)(G.a,{className:e.avatar,children:Object(m.jsx)(K.a,{})}),Object(m.jsx)(C.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(m.jsx)(X.c,{initialValues:{name:"",email:"",password:"",confirmPassword:""},onSubmit:function(e){return t=e.email,r=e.password,a=e.name,void n(t,r,a);var t,r,a},validationSchema:ae,children:function(t){return Object(m.jsxs)(X.b,{children:[Object(m.jsx)(X.a,{name:"name",margin:"normal",placeholder:"Email",required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0,component:$.a}),Object(m.jsx)(X.a,{name:"email",margin:"normal",placeholder:"Email",required:!0,fullWidth:!0,id:"email",label:"Email Address",autoComplete:"email",component:$.a}),Object(m.jsx)(X.a,{name:"password",margin:"normal",placeholder:"password",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",component:$.a}),Object(m.jsx)(X.a,{name:"confirmPassword",margin:"normal",placeholder:"password",required:!0,fullWidth:!0,label:"Confirm Password",type:"password",id:"confirmpassword",component:$.a}),Object(m.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:a===ee.a.pending,children:a===ee.a.pending?Object(m.jsx)(Z.a,{}):"Sign In"}),Object(m.jsxs)(M.a,{container:!0,justifyContent:"center",direction:"column",alignItems:"center",children:[a===ee.a.rejected&&Object(m.jsx)(M.a,{item:!0,children:Object(m.jsx)(C.a,{variant:"subtitle1",children:c})}),Object(m.jsx)(M.a,{item:!0,children:Object(m.jsx)(J.a,{variant:"body2",color:"inherit",component:l.b,to:"/",children:"Already have an account? Sign In"})})]})]})}})]})})},oe=a.a.lazy((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,403))})),ie=a.a.lazy((function(){return n.e(4).then(n.bind(null,401))}));var se=function(){var e=z(),t=e.theme,n=e.isDarkMode,a=e.toggleHandler,c=Object(q.c)().isAuthenticated;return Object(m.jsx)(j.ErrorBoundary,{FallbackComponent:h,onReset:function(){localStorage.clear(),window.location.reload(!1)},children:Object(m.jsxs)(u.a,{theme:t,children:[Object(m.jsx)(d.a,{}),Object(m.jsx)(W,{isDarkMode:n,toggleHandler:a}),Object(m.jsx)(r.Suspense,{fallback:Object(m.jsx)(p.a,{}),children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{exact:!0,path:"/",children:Object(m.jsx)(re,{})}),Object(m.jsx)(b.b,{path:"/signup",children:Object(m.jsx)(ce,{})}),Object(m.jsx)(b.b,{path:"/todos",children:c?Object(m.jsx)(oe,{}):Object(m.jsx)(b.a,{to:"/"})}),Object(m.jsx)(b.b,{path:"/404",children:Object(m.jsx)(ie,{})}),Object(m.jsx)(b.b,{children:Object(m.jsx)(b.a,{to:"/404"})})]})})]})})},le=new i.a;o.a.render(Object(m.jsx)(l.a,{basename:"/todos",children:Object(m.jsx)(s.a,{client:le,children:Object(m.jsx)(q.a,{children:Object(m.jsx)(se,{})})})}),document.getElementById("root"))},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a,c=n(12),o=n(0),i=function(e){var t=Object(o.useRef)(!1);return Object(o.useLayoutEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(o.useCallback)((function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];t.current&&e.call.apply(e,[null].concat(r))}),[e])};function s(e,t){switch(t.type){case r.pending:return{status:r.pending,data:null,error:null};case r.resolved:return{status:r.resolved,data:t.data,error:null};case r.rejected:return{status:r.rejected,data:null,error:t.error};default:throw new Error("Unhandled action type")}}!function(e){e.pending="pending",e.resolved="resolved",e.rejected="rejected"}(r||(r={})),function(e){e.idle="idle"}(a||(a={}));t.b=function(e){var t=Object(o.useReducer)(s,{status:a.idle,data:e,error:null}),n=Object(c.a)(t,2),l=n[0],u=n[1],d=i(u),j=l.data;return{error:l.error,status:l.status,data:j,runAsync:Object(o.useCallback)((function(e){d({type:r.pending}),e.then((function(e){d({type:r.resolved,data:e})}),(function(e){d({type:r.rejected,error:e})}))}),[d]),setState:Object(o.useCallback)((function(e){d({type:r.resolved,data:e})}),[d]),setError:Object(o.useCallback)((function(e){d({type:r.rejected,error:e})}),[d])}}},35:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return v}));var r=n(67),a=n.n(r),c=n(65),o=n(12),i=n(92),s=n(93),l=n.n(s),u=n(0),d=n(15),j=function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[null,e.t0]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=n(56),m=n(33),h=n(3),p="refreshToken",f=l.a.create({baseURL:"".concat("https://identitytoolkit.googleapis.com/v1/"),headers:{"Content-Type":"application/json"}}),O=function(e){return l.a.post("".concat("https://securetoken.googleapis.com/v1/token?key=AIzaSyB14rNS-GQZAuoDQDP9tWBZiGO3Cn318c8"),"grant_type=refresh_token&refresh_token=".concat(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.data})).catch((function(e){return Promise.reject(e)}))},x=Object(u.createContext)(void 0);var g=function(e){var t=e.children,n=Object(m.b)(null),r=n.error,s=n.status,g=n.data,v=n.runAsync,w=n.setState,k=n.setError,y=Object(d.g)();Object(u.useEffect)((function(){var e=b.a.getItem(p);e&&O(e).then((function(e){w({idToken:e.access_token,email:"",refreshToken:e.refresh_token,expiresIn:e.expires_in,localId:e.user_id,displayName:"",kind:"",registered:!0}),y.push("/todos")})).catch((function(e){localStorage.removeItem(p),alert("Failed to refresh Token")}))}),[w,y]);var S=Object(u.useCallback)((function(e){return g&&(e.url="".concat(e.url,"?auth=").concat(g.idToken)),e}),[g]),C=Object(u.useCallback)(function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,u,d,b,m,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==(t.response?t.response.status:0)||!g){e.next=15;break}return e.next=4,j(O(g.refreshToken));case 4:return n=e.sent,r=Object(o.a)(n,1),(i=r[0])&&(console.log("refresh true",i),w(Object(c.a)(Object(c.a)({},g),{},{idToken:i.access_token,refreshToken:i.refresh_token})),d=null===(s=t.config.url)||void 0===s?void 0:s.lastIndexOf("auth="),t.config.url="".concat(null===(u=t.config.url)||void 0===u?void 0:u.slice(0,d),"auth=").concat(i.id_token)),e.next=10,j(l()(t.config));case 10:if(b=e.sent,m=Object(o.a)(b,1),!(h=m[0])){e.next=15;break}return e.abrupt("return",h);case 15:return e.abrupt("return",Promise.reject(t));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[g,w]),I={error:r,status:s,userData:g,signUpUser:function(e,t,n){v(function(e,t,n){return f.post("/accounts:signUp?key=".concat("AIzaSyB14rNS-GQZAuoDQDP9tWBZiGO3Cn318c8"),{email:e,password:t,displayName:n,returnSecureToken:!0}).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.message)}))}(e,t,n))},loginUser:function(e,t){v(function(e,t){return f.post("/accounts:signInWithPassword?key=".concat("AIzaSyB14rNS-GQZAuoDQDP9tWBZiGO3Cn318c8"),{email:e,password:t,returnSecureToken:!0}).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.message)}))}(e,t))},logOutUser:function(){localStorage.removeItem(p),k("Log out")},addTokenToHeader:S,refreshTokenOn401:C,isAuthenticated:!!g};return Object(h.jsx)(x.Provider,{value:I,children:t})};function v(){var e=Object(u.useContext)(x);if(!e)throw new Error("useAuth must be used within a AuthProvider");return e}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(65),a=n(2),c=n(326),o=n(25),i=(n(0),n(3)),s=["error","helperText","field","form"],l=function(e){var t=Object(o.d)(e.form.touched,e.field.name),n=Object(o.d)(e.form.errors,e.field.name),l=e.error,u=e.helperText,d=e.field,j=(e.form,Object(a.a)(e,s));return Object(i.jsx)(c.a,Object(r.a)(Object(r.a)({variant:"outlined",error:null!==l&&void 0!==l?l:Boolean(t&&n),helperText:null!==u&&void 0!==u?u:t&&n?n:void 0},j),d))}},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(11),c=new(function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"setItem",value:function(e,t){localStorage.setItem(e,JSON.stringify({value:t}))}},{key:"getItem",value:function(e,t){var n=localStorage.getItem(e);return null!==n?JSON.parse(n).value:t||null}}]),e}())}},[[319,1,2]]]);
//# sourceMappingURL=main.4bbc1ad3.chunk.js.map