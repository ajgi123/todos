(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[4],{400:function(e,t,n){"use strict";n.r(t);var o=n(12),a=n(399),i=n(321),c=n(319),r=n(377),d=n(323),s=n(0),u=n(370),l=n(368),j=n(25),b=n(36),O=n(52),p=n(3),h=b.a({todo:b.c().required("Name is required").min(3,"Todo must be at least 3 characters").max(35,"Todo must be not longer than 35 characters")}),m=function(e){var t=e.addTodo,n=e.localId,o=e.isLoadingAdd,a=e.initialValue,c=void 0===a?"":a,r=Object(s.useRef)(null);return Object(p.jsx)(l.a,{component:"main",maxWidth:"md",children:Object(p.jsx)(j.c,{innerRef:r,initialValues:{todo:c},onSubmit:function(e){return function(e){var o;t({localId:n,todo:{id:1,title:e,done:!1}}),null===(o=r.current)||void 0===o||o.resetForm()}(e.todo)},validationSchema:h,children:function(e){return Object(p.jsxs)(j.b,{children:[Object(p.jsx)(j.a,{name:"todo",margin:"normal",placeholder:"Todo",required:!0,fullWidth:!0,id:"Todo",label:"Todo",component:O.a}),Object(p.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:o,children:o?Object(p.jsx)(i.a,{}):"Submit"})]})}})})},f=n(402),g=n(398),x=n(396),v=n(397),k=n(395),L=n(47),T=n(394),I=function(e){var t=Object(L.a)(),n=Object(T.a)(t.breakpoints.down("sm"));return Object(p.jsx)("div",{children:Object(p.jsxs)(f.a,{fullScreen:n,open:e.open,onClose:e.handleClose,"aria-labelledby":"error-dialog-title",children:[Object(p.jsx)(k.a,{id:"error-dialog-title",children:"Something went wrong"}),Object(p.jsx)(x.a,{children:Object(p.jsx)(v.a,{children:"You will be log out."})}),Object(p.jsx)(g.a,{children:Object(p.jsx)(u.a,{autoFocus:!0,onClick:e.handleClose,color:"primary",children:"Close"})})]})})},C=n(87),E=n(16),y=n(375),S=n(369),w=n(371),F=n(366),R=n(367),q=n(168),M=n(378),U=n(322),A=n(384),D=n.n(A),N=n(383),z=n.n(N),W=n(21),B=function(e,t){var n=Object(s.useState)(e),a=Object(o.a)(n,2),i=a[0],c=a[1];return Object(s.useEffect)((function(){c(e)}),[e].concat(Object(W.a)(t))),[i,c]},J=Object(c.a)((function(e){return Object(r.a)({root:{flexGrow:1,margin:e.spacing(2),width:"100%"},paper:{padding:e.spacing(2),margin:"auto",maxWidth:1e3},desktop:Object(E.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),mobile:Object(E.a)({display:"block"},e.breakpoints.up("sm"),{display:"none"})})})),P=function(e){var t=Object(s.useState)(!1),n=Object(o.a)(t,2),a=n[0],c=n[1],r=B(e.title,[a]),l=Object(o.a)(r,2),j=l[0],b=l[1],O=B(e.done,[]),h=Object(o.a)(O,1)[0],m=J(),f=Object(s.useState)(null),g=Object(o.a)(f,2),x=g[0],v=g[1];function k(){c((function(e){return!e}))}function L(){e.removeTodo({localId:e.localId,id:e.id})}var T=Boolean(x),I="mobile-todo-menu",C=Object(p.jsxs)(q.a,{anchorEl:x,anchorOrigin:{vertical:"top",horizontal:"right"},id:I,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:T,onClose:function(){v(null)},children:[Object(p.jsx)(M.a,{onClick:k,children:a?"Cancel":"Edit"}),Object(p.jsx)(M.a,{onClick:L,children:"Remove"})]});return Object(p.jsxs)("div",{className:m.root,children:[Object(p.jsx)(U.a,{className:m.paper,children:Object(p.jsxs)(w.a,{container:!0,spacing:2,direction:"row",justifyContent:"space-around",alignItems:"center",children:[Object(p.jsx)(w.a,{item:!0,xs:!0,children:a?Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c(!1),e.updateTodo({localId:e.localId,todo:{id:e.id,title:j,done:e.done}})},children:[Object(p.jsx)(R.a,{id:"component-simple",value:j,onChange:function(e){b(e.target.value)}}),Object(p.jsx)(u.a,{type:"submit",children:"Change"})]}):e.isLoadingUpdate&&e.isMutating?Object(p.jsx)(i.a,{}):Object(p.jsx)(d.a,{gutterBottom:!0,variant:"subtitle1",children:e.title})}),Object(p.jsx)(w.a,{item:!0,children:e.isLoadingUpdate&&e.isMutating?Object(p.jsx)(i.a,{}):Object(p.jsx)(S.a,{control:Object(p.jsx)(y.a,{checked:h,onChange:function(){e.updateTodo({localId:e.localId,todo:{id:e.id,title:e.title,done:!h}})},name:"checkedB",color:"primary"}),label:"Done"})}),Object(p.jsx)(w.a,{item:!0,className:m.mobile,children:e.isLoadingRemove&&e.isMutating?Object(p.jsx)(i.a,{}):Object(p.jsx)(F.a,{edge:"end","aria-label":"account of current user","aria-controls":I,"aria-haspopup":"true",onClick:function(e){v(e.currentTarget)},children:Object(p.jsx)(z.a,{})})}),Object(p.jsx)(w.a,{item:!0,className:m.desktop,children:Object(p.jsx)(u.a,{variant:"contained",color:"primary",onClick:k,children:a?"Cancel":"Edit"})}),Object(p.jsx)(w.a,{item:!0,className:m.desktop,children:e.isLoadingRemove&&e.isMutating?Object(p.jsx)(i.a,{}):Object(p.jsx)(F.a,{onClick:L,children:Object(p.jsx)(D.a,{})})})]})}),C]})},V=n(30),G=n(65),H=n(94),Q=n.n(H),Y=n(328),K=n(401),X=n(403),Z=function(e){return e},$=function(e){return Promise.reject(e)},_=function(e){return e},ee=function(e){return Promise.reject(e)},te=function(e,t){var n=t.requestFunc,o=void 0===n?Z:n,a=t.requestErrorFunc,i=void 0===a?$:a,c=t.responseFunc,r=void 0===c?_:c,d=t.responseErrorFunc,u=void 0===d?ee:d;Object(s.useEffect)((function(){var t=e.interceptors.request.use(o,i),n=e.interceptors.response.use(r,u);return function(){e.interceptors.request.eject(t),e.interceptors.response.eject(n)}}),[i,o,u,r])},ne=Q.a.create({baseURL:"".concat("https://todo-319b6-default-rtdb.europe-west1.firebasedatabase.app")}),oe=function(e){var t=e.localId,n=e.todo;return ne.patch("/users/".concat(t,"/todo/").concat(n.id,".json"),n).then((function(e){return e.data})).catch((function(e){return e}))},ae=function(e){var t=e.localId,n=e.id;return ne.delete("/users/".concat(t,"/todo/").concat(n,".json")).catch((function(e){return e}))},ie=(new Date).getTime(),ce=function(e){var t=e.localId,n=e.todo,o=ie+=1;return n.id=o,ne.put("/users/".concat(t,"/todo/").concat(o,".json"),n).then((function(e){return e.data})).catch((function(e){return e}))},re=function(e){var t=Object(V.c)(),n=t.userData,a=t.addTokenToHeader,i=t.refreshTokenOn401;te(ne,{requestFunc:a,responseErrorFunc:i});var c=Object(s.useState)(-1),r=Object(o.a)(c,2),d=r[0],u=r[1],l=n?n.localId:"",j=Object(Y.b)(),b=Object(K.a)(["todo",l],(function(){return function(e){return ne.get("/users/".concat(e,"/todo.json")).then((function(e){return e.data})).then((function(e){return Object.values(e)})).catch((function(e){return e}))}(l)}),{initialData:e}),O=b.data,p=b.isError,h=b.isLoading,m=b.isFetching,f={onSuccess:function(){u(-1),j.invalidateQueries()}},g=Object(X.a)(ce,f),x=g.isLoading,v=g.isError,k=g.isSuccess,L=g.mutate,T=Object(X.a)(oe,Object(G.a)(Object(G.a)({},f),{},{onMutate:function(e){u(e.todo.id)}})),I=T.isLoading,C=T.isError,E=T.mutate,y=Object(X.a)(ae,Object(G.a)(Object(G.a)({},f),{},{onMutate:function(e){u(e.id)}})),S=y.isLoading,w=y.isError;return{data:O,isError:v||p||w||C,isLoading:h,isFetching:m,isLoadingAdd:x,isErrorAdd:v,isSuccessAdd:k,add:L,isLoadingUpdate:I,isErrorUpdate:C,update:E,isLoadingRemove:S,isErrorRemove:w,remove:y.mutate,mutatingTodoId:d}},de=Object(c.a)((function(e){return Object(r.a)({absolute:{position:"absolute",zIndex:3}})})),se=[];t.default=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(V.c)(),u=r.userData,l=r.logOutUser,j=de(),b=u?u.localId:"",O=re(se),h=O.data,f=O.isFetching,g=O.isLoading,x=O.isError,v=O.update,k=O.isLoadingUpdate,L=O.remove,T=O.isLoadingRemove,E=O.add,y=O.isLoadingAdd,S=O.mutatingTodoId;Object(s.useEffect)((function(){x&&c(!0)}),[x]);var w=Object(p.jsx)(d.a,{variant:"h4",children:"Add your first Todo"});return g&&(w=Object(p.jsx)(C.a,{})),h&&h.length&&(w=h.map((function(e){return Object(p.jsx)(P,{id:e.id,title:e.title,done:e.done,removeTodo:L,isLoadingRemove:T,updateTodo:v,isLoadingUpdate:k,localId:b,isMutating:S===e.id},e.id)}))),Object(p.jsxs)(a.a,{paddingTop:"5rem",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(I,{open:n,handleClose:function(){localStorage.clear(),l(),c(!1)}}),f&&Object(p.jsx)(i.a,{size:80,className:j.absolute}),Object(p.jsx)(m,{addTodo:E,localId:b,isLoadingAdd:y}),w]})}}}]);
//# sourceMappingURL=4.60760842.chunk.js.map