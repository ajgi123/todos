(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[4],{402:function(e,t,o){"use strict";o.r(t);var n=o(12),a=o(401),i=o(323),c=o(321),r=o(379),d=o(172),s=o(0),l=o(371),u=o(369),j=o(25),b=o(36),O=o(53),p=o(3),m=b.a({todo:b.c().required("Name is required").min(3,"Todo must be at least 3 characters").max(35,"Todo must be not longer than 35 characters")}),h=function(e){var t=e.addTodo,o=e.localId,n=e.isLoadingAdd,a=e.initialValue,c=void 0===a?"":a,r=Object(s.useRef)(null);return Object(p.jsx)(u.a,{component:"main",maxWidth:"md",children:Object(p.jsx)(j.c,{innerRef:r,initialValues:{todo:c},onSubmit:function(e){return function(e){var n;t({localId:o,todo:{id:1,title:e,done:!1}}),null===(n=r.current)||void 0===n||n.resetForm()}(e.todo)},validationSchema:m,children:function(e){return Object(p.jsxs)(j.b,{children:[Object(p.jsx)(j.a,{name:"todo",margin:"normal",placeholder:"Todo",required:!0,fullWidth:!0,id:"Todo",label:"Todo",component:O.a}),Object(p.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:n,children:n?Object(p.jsx)(i.a,{}):"Submit"})]})}})})},f=o(404),g=o(400),x=o(398),v=o(399),k=o(397),T=o(47),I=o(396),L=function(e){var t=Object(T.a)(),o=Object(I.a)(t.breakpoints.down("sm"));return Object(p.jsx)("div",{children:Object(p.jsxs)(f.a,{fullScreen:o,open:e.open,onClose:e.handleClose,"aria-labelledby":"error-dialog-title",children:[Object(p.jsx)(k.a,{id:"error-dialog-title",children:"Something went wrong"}),Object(p.jsx)(x.a,{children:Object(p.jsx)(v.a,{children:"You will be log out."})}),Object(p.jsx)(g.a,{children:Object(p.jsx)(l.a,{autoFocus:!0,onClick:e.handleClose,color:"primary",children:"Close"})})]})})},C=o(122),E=o(17),y=o(377),S=o(370),w=o(372),F=o(367),R=o(368),q=o(169),M=o(380),U=o(324),A=o(386),D=o.n(A),N=o(385),z=o.n(N),W=o(21),B=function(e,t){var o=Object(s.useState)(e),a=Object(n.a)(o,2),i=a[0],c=a[1];return Object(s.useEffect)((function(){c(e)}),[e].concat(Object(W.a)(t))),[i,c]},J=Object(c.a)((function(e){return Object(r.a)({root:{flexGrow:1,margin:e.spacing(2),width:"100%"},paper:{padding:e.spacing(2),margin:"auto",maxWidth:1e3},desktop:Object(E.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),mobile:Object(E.a)({display:"block"},e.breakpoints.up("sm"),{display:"none"})})})),P=function(e){var t=Object(s.useState)(!1),o=Object(n.a)(t,2),a=o[0],c=o[1],r=B(e.title,[a]),u=Object(n.a)(r,2),j=u[0],b=u[1],O=B(e.done,[]),m=Object(n.a)(O,1)[0],h=J(),f=Object(s.useState)(null),g=Object(n.a)(f,2),x=g[0],v=g[1];function k(){c((function(e){return!e}))}function T(){e.removeTodo({localId:e.localId,id:e.id})}var I=Boolean(x),L="mobile-todo-menu",C=Object(p.jsxs)(q.a,{anchorEl:x,anchorOrigin:{vertical:"top",horizontal:"right"},id:L,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:I,onClose:function(){v(null)},children:[Object(p.jsx)(M.a,{onClick:k,children:a?"Cancel":"Edit"}),Object(p.jsx)(M.a,{onClick:T,children:"Remove"})]});return Object(p.jsxs)("div",{className:h.root,children:[Object(p.jsx)(U.a,{className:h.paper,children:Object(p.jsxs)(w.a,{container:!0,spacing:2,direction:"row",justifyContent:"space-around",alignItems:"center",children:[Object(p.jsx)(w.a,{item:!0,xs:!0,children:a?Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c(!1),e.updateTodo({localId:e.localId,todo:{id:e.id,title:j,done:e.done}})},children:[Object(p.jsx)(R.a,{id:"component-simple",value:j,onChange:function(e){b(e.target.value)}}),Object(p.jsx)(l.a,{type:"submit",children:"Change"})]}):e.isLoadingUpdate&&e.isMutating?Object(p.jsx)(i.a,{}):Object(p.jsx)(d.a,{gutterBottom:!0,variant:"subtitle1",children:e.title})}),Object(p.jsx)(w.a,{item:!0,children:e.isLoadingUpdate&&e.isMutating?Object(p.jsx)(i.a,{}):Object(p.jsx)(S.a,{control:Object(p.jsx)(y.a,{checked:m,onChange:function(){e.updateTodo({localId:e.localId,todo:{id:e.id,title:e.title,done:!m}})},name:"checkedB",color:"primary"}),label:"Done"})}),Object(p.jsx)(w.a,{item:!0,className:h.mobile,children:e.isLoadingRemove&&e.isMutating?Object(p.jsx)(i.a,{}):Object(p.jsx)(F.a,{edge:"end","aria-label":"account of current user","aria-controls":L,"aria-haspopup":"true",onClick:function(e){v(e.currentTarget)},children:Object(p.jsx)(z.a,{})})}),Object(p.jsx)(w.a,{item:!0,className:h.desktop,children:Object(p.jsx)(l.a,{variant:"contained",color:"primary",onClick:k,children:a?"Cancel":"Edit"})}),Object(p.jsx)(w.a,{item:!0,className:h.desktop,children:e.isLoadingRemove&&e.isMutating?Object(p.jsx)(i.a,{}):Object(p.jsx)(F.a,{onClick:T,children:Object(p.jsx)(D.a,{})})})]})}),C]})},V=o(35),G=o(65),H=o(94),Q=o.n(H),Y=o(329),K=o(403),X=o(405),Z=function(e){return e},$=function(e){return Promise.reject(e)},_=function(e){return e},ee=function(e){return Promise.reject(e)},te=function(e,t){var o=t.requestFunc,n=void 0===o?Z:o,a=t.requestErrorFunc,i=void 0===a?$:a,c=t.responseFunc,r=void 0===c?_:c,d=t.responseErrorFunc,l=void 0===d?ee:d;Object(s.useEffect)((function(){var t=e.interceptors.request.use(n,i),o=e.interceptors.response.use(r,l);return function(){e.interceptors.request.eject(t),e.interceptors.response.eject(o)}}),[i,n,l,r])},oe=Q.a.create({baseURL:"".concat("https://todo-319b6-default-rtdb.europe-west1.firebasedatabase.app")}),ne=function(e){var t=e.localId,o=e.todo;return oe.patch("/users/".concat(t,"/todo/").concat(o.id,".json"),o)},ae=function(e){var t=e.localId,o=e.id;return oe.delete("/users/".concat(t,"/todo/").concat(o,".json"))},ie=(new Date).getTime(),ce=function(e){var t=e.localId,o=e.todo,n=ie+=1;return o.id=n,oe.put("/users/".concat(t,"/todo/").concat(n,".json"),o)},re=function(e){var t=Object(V.c)(),o=t.userData,a=t.addTokenToHeader,i=t.refreshTokenOn401;te(oe,{requestFunc:a,responseErrorFunc:i});var c=Object(s.useState)(-1),r=Object(n.a)(c,2),d=r[0],l=r[1],u=o?o.localId:"",j=Object(Y.b)(),b=Object(K.a)(["todo",u],(function(){return function(e){return oe.get("/users/".concat(e,"/todo.json")).then((function(e){return e.data})).then((function(e){return e?Object.values(e):[]}))}(u)}),{initialData:e}),O=b.data,p=b.isError,m=b.isLoading,h=b.isFetching,f={onSuccess:function(){l(-1),j.invalidateQueries()}},g=Object(X.a)(ce,f),x=g.isLoading,v=g.isError,k=g.isSuccess,T=g.mutate,I=Object(X.a)(ne,Object(G.a)(Object(G.a)({},f),{},{onMutate:function(e){l(e.todo.id)}})),L=I.isLoading,C=I.isError,E=I.mutate,y=Object(X.a)(ae,Object(G.a)(Object(G.a)({},f),{},{onMutate:function(e){l(e.id)}})),S=y.isLoading,w=y.isError;return{data:O,isError:v||p||w||C,isLoading:m,isFetching:h,isLoadingAdd:x,isErrorAdd:v,isSuccessAdd:k,add:T,isLoadingUpdate:L,isErrorUpdate:C,update:E,isLoadingRemove:S,isErrorRemove:w,remove:y.mutate,mutatingTodoId:d}},de=Object(c.a)((function(e){return Object(r.a)({absolute:{position:"absolute",zIndex:3}})})),se=[];t.default=function(){var e=Object(s.useState)(!1),t=Object(n.a)(e,2),o=t[0],c=t[1],r=Object(V.c)(),l=r.userData,u=r.logOutUser,j=de(),b=l?l.localId:"",O=re(se),m=O.data,f=O.isFetching,g=O.isError,x=O.update,v=O.isLoadingUpdate,k=O.remove,T=O.isLoadingRemove,I=O.add,E=O.isLoadingAdd,y=O.mutatingTodoId;Object(s.useEffect)((function(){g&&c(!0)}),[g]);var S=Object(p.jsx)(d.a,{variant:"body1",children:"Add your first Todo"});return f&&(S=Object(p.jsx)(C.a,{})),m&&m.length&&(S=m.map((function(e){return Object(p.jsx)(P,{id:e.id,title:e.title,done:e.done,removeTodo:k,isLoadingRemove:T,updateTodo:x,isLoadingUpdate:v,localId:b,isMutating:y===e.id},e.id)}))),Object(p.jsxs)(a.a,{paddingTop:"5rem",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(L,{open:o,handleClose:function(){localStorage.clear(),u(),c(!1)}}),f&&Object(p.jsx)(i.a,{size:80,className:j.absolute}),Object(p.jsx)(h,{addTodo:I,localId:b,isLoadingAdd:E}),S]})}}}]);
//# sourceMappingURL=4.8385bd75.chunk.js.map