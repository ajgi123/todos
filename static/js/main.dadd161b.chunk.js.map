{"version":3,"sources":["components/full-page-spinner/FullPageSpinner.tsx","components/error-fallback/ErrorFallback.tsx","components/navbar/Navbar.tsx","components/page-not-found/PageNotFound.tsx","components/protected-route/PrivateRoute.tsx","hooks/useLocalStorage.ts","hooks/useToggleTheme.ts","pages/shared/style.ts","pages/sign-in/SignIn.tsx","pages/sign-up/SignUp.tsx","App.tsx","index.tsx","hooks/useAsync.ts","hooks/useSafeDispatch.ts","helpers/asyncHelpers.ts","context/AuthProvider.tsx","components/form-text-field/FormTextField.tsx","helpers/localStorageService.ts","components/shared/full-page-center.ts"],"names":["FullPageSpinner","classes","useStyles","className","fullpage","size","ErrorFallback","error","resetErrorBoundary","role","message","onClick","makeStyles","theme","createStyles","grow","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","Navbar","props","useState","anchorEl","setAnchorEl","useAuth","isAuthenticated","userData","logOutUser","displayName","email","isMenuOpen","Boolean","menuId","renderMenu","Menu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","open","onClose","MenuItem","AppBar","position","color","Toolbar","Typography","variant","noWrap","IconButton","toggleHandler","isDarkMode","edge","event","currentTarget","PageNotFound","PrivateRoute","children","componentPath","rederictToPath","path","render","location","to","pathname","state","from","useLocalStorage","key","initialValue","initialiazeState","useCallback","localStorageService","getItem","storedValue","setStoredValue","useEffect","setItem","useToggleTheme","setIsDarkMode","palletType","createTheme","palette","type","prevState","paper","marginTop","flexDirection","alignItems","avatar","margin","backgroundColor","secondary","main","form","width","submit","validationSchema","yup","required","password","min","SignIn","loginUser","status","rememberMe","setRemeberMe","history","useHistory","clickHandler","curState","Action","resolved","REFRESH_TOKEN_LOCAL_STORAGE","refreshToken","push","Container","component","maxWidth","Avatar","initialValues","onSubmit","values","name","placeholder","fullWidth","label","autoComplete","autoFocus","FormTextField","Tooltip","arrow","FormControlLabel","control","Checkbox","value","Button","disabled","pending","CircularProgress","Grid","container","justifyContent","direction","rejected","item","Link","RouterLink","confirmPassword","oneOf","SignUp","signUpUser","TodoList","React","lazy","App","FallbackComponent","onReset","localStorage","clear","window","reload","ThemeProvider","CssBaseline","fallback","exact","queryClient","QueryClient","ReactDOM","basename","QueryClientProvider","client","AuthProvider","document","getElementById","Idle","useSafeDispatch","dispatch","mountedRef","useRef","useLayoutEffect","current","args","call","asyncReducer","prevstate","action","data","Error","useAsync","initialState","useReducer","idle","unSafeDispatch","runAsync","promise","then","setState","setError","tryCatch","a","signUpLoginInstance","axios","create","baseURL","process","headers","post","response","catch","err","Promise","reject","AuthContext","createContext","undefined","refresh","res","idToken","access_token","refresh_token","expiresIn","expires_in","localId","user_id","kind","registered","removeItem","alert","addTokenToHeader","config","url","refreshTokenOn401","resRefresh","console","log","index","lastIndexOf","slice","id_token","resAxios","returnSecureToken","signUp","login","Provider","context","useContext","isTouched","getIn","touched","field","errorMessage","errors","helperText","rest","JSON","stringify","otherwise","parse","height"],"mappings":"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","file":"static/js/main.dadd161b.chunk.js","sourcesContent":["import { CircularProgress } from \"@material-ui/core\";\r\nimport { useStyles } from \"../shared/full-page-center\";\r\n\r\nconst FullPageSpinner = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.fullpage}>\r\n      <CircularProgress size={100} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FullPageSpinner;\r\n","const ErrorFallback = ({\r\n  error,\r\n  resetErrorBoundary,\r\n}: {\r\n  error: Error;\r\n  resetErrorBoundary: () => void;\r\n}) => {\r\n  return (\r\n    <div role=\"alert\">\r\n      <p>Something went wrong:</p>\r\n      <pre>{error.message}</pre>\r\n      <button onClick={resetErrorBoundary}>Try again</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorFallback;\r\n","import AppBar from \"@material-ui/core/AppBar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport Brightness3Icon from \"@material-ui/icons/Brightness3\";\r\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\r\nimport { useState } from \"react\";\r\nimport { useAuth } from \"../../context/AuthProvider\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    grow: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      display: \"none\",\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        display: \"block\",\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\ntype NavbarPropsType = {\r\n  isDarkMode: boolean;\r\n  toggleHandler: () => void;\r\n};\r\n\r\nexport default function Navbar(props: NavbarPropsType) {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n\r\n  const { isAuthenticated, userData, logOutUser } = useAuth();\r\n  const displayName = userData?.displayName;\r\n  const email = userData?.email;\r\n\r\n  const isMenuOpen = Boolean(anchorEl);\r\n\r\n  const handleProfileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const menuId = \"primary-search-account-menu\";\r\n  const renderMenu = (\r\n    <Menu\r\n      anchorEl={anchorEl}\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      open={isMenuOpen}\r\n      onClose={handleMenuClose}\r\n    >\r\n      <MenuItem\r\n        onClick={() => {\r\n          logOutUser();\r\n          setAnchorEl(null);\r\n        }}\r\n      >\r\n        Log out\r\n      </MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"fixed\" color=\"default\">\r\n        <Toolbar>\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n            Todo App\r\n          </Typography>\r\n          <div className={classes.grow} />\r\n          <div>\r\n            <IconButton onClick={props.toggleHandler}>\r\n              {props.isDarkMode ? <Brightness4Icon /> : <Brightness3Icon />}\r\n            </IconButton>\r\n            {isAuthenticated && (\r\n              <>\r\n                {displayName || email}\r\n                <IconButton\r\n                  edge=\"end\"\r\n                  aria-label=\"account of current user\"\r\n                  aria-controls={menuId}\r\n                  aria-haspopup=\"true\"\r\n                  onClick={handleProfileMenuOpen}\r\n                  color=\"inherit\"\r\n                >\r\n                  <AccountCircle />\r\n                </IconButton>\r\n              </>\r\n            )}\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      {renderMenu}\r\n    </div>\r\n  );\r\n}\r\n","import Typography from \"@material-ui/core/Typography\";\r\nimport { useStyles } from \"../shared/full-page-center\";\r\n\r\nconst PageNotFound = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.fullpage}>\r\n      <Typography variant=\"h2\">Page Not Found</Typography>\r\n      <Typography variant=\"h1\">404</Typography>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageNotFound;\r\n","import { ReactNode } from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\nimport { useAuth } from \"../../context/AuthProvider\";\r\n\r\ntype PrivateRoutePropsType = {\r\n  children: ReactNode;\r\n  componentPath: string;\r\n  rederictToPath: string;\r\n};\r\n\r\nconst PrivateRoute = ({\r\n  children,\r\n  componentPath,\r\n  rederictToPath,\r\n}: PrivateRoutePropsType) => {\r\n  const { isAuthenticated } = useAuth();\r\n  return (\r\n    <Route\r\n      path={componentPath}\r\n      render={({ location }) =>\r\n        isAuthenticated ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: rederictToPath,\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import {\r\n  Dispatch,\r\n  SetStateAction,\r\n  useCallback,\r\n  useEffect,\r\n  useState,\r\n} from \"react\";\r\nimport { localStorageService } from \"../helpers/localStorageService\";\r\n\r\nconst useLocalStorage = <T>(\r\n  key: string,\r\n  initialValue: T\r\n): [T, Dispatch<SetStateAction<T>>] => {\r\n  const initialiazeState = useCallback(() => {\r\n    const localData = localStorageService.getItem<T>(key, initialValue);\r\n    return localData;\r\n  }, [key, initialValue]);\r\n\r\n  const [storedValue, setStoredValue] = useState<T>(initialiazeState);\r\n\r\n  useEffect(() => {\r\n    setStoredValue(initialiazeState);\r\n  }, [initialiazeState]);\r\n\r\n  useEffect(() => {\r\n    localStorageService.setItem(key, storedValue);\r\n  }, [storedValue, key]);\r\n\r\n  return [storedValue, setStoredValue];\r\n};\r\n\r\nexport default useLocalStorage;\r\n","import { createTheme } from \"@material-ui/core\";\r\nimport useLocalStorage from \"./useLocalStorage\";\r\n\r\nconst useToggleTheme = () => {\r\n  const [isDarkMode, setIsDarkMode] = useLocalStorage(\"theme\", false);\r\n\r\n  const palletType = isDarkMode ? \"dark\" : \"light\";\r\n\r\n  const theme = createTheme({\r\n    palette: {\r\n      type: palletType,\r\n    },\r\n  });\r\n\r\n  function toggleHandler() {\r\n    setIsDarkMode((prevState) => {\r\n      return !prevState;\r\n    });\r\n  }\r\n\r\n  return { isDarkMode, theme, toggleHandler };\r\n};\r\n\r\nexport default useToggleTheme;\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(10),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport { Field, Form, Formik, FormikProps } from \"formik\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport * as yup from \"yup\";\r\nimport { FormTextField } from \"../../components/form-text-field/FormTextField\";\r\nimport {\r\n  REFRESH_TOKEN_LOCAL_STORAGE,\r\n  useAuth,\r\n} from \"../../context/AuthProvider\";\r\nimport { localStorageService } from \"../../helpers/localStorageService\";\r\nimport { Action } from \"../../hooks/useAsync\";\r\nimport { useStyles } from \"../shared/style\";\r\n\r\nconst validationSchema = yup.object({\r\n  email: yup\r\n    .string()\r\n    .email(\"Enter a valid email\")\r\n    .required(\"Email is required\"),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"Password should be of minimum 8 characters length\")\r\n    .required(\"Password is required\"),\r\n});\r\n\r\nexport default function SignIn() {\r\n  const classes = useStyles();\r\n  const { loginUser, status, userData, error } = useAuth();\r\n  const [rememberMe, setRemeberMe] = useState(false);\r\n  let history = useHistory();\r\n\r\n  function submitHandler(email: string, password: string) {\r\n    loginUser(email, password);\r\n  }\r\n\r\n  function clickHandler() {\r\n    setRemeberMe((curState) => !curState);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (status === Action.resolved && userData) {\r\n      if (rememberMe && userData) {\r\n        localStorageService.setItem(\r\n          REFRESH_TOKEN_LOCAL_STORAGE,\r\n          userData.refreshToken\r\n        );\r\n      }\r\n      history.push(\"/todos\");\r\n    }\r\n  }, [status, history, rememberMe, userData]);\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <Formik\r\n          initialValues={{ email: \"\", password: \"\" }}\r\n          onSubmit={(values) => submitHandler(values.email, values.password)}\r\n          validationSchema={validationSchema}\r\n        >\r\n          {(props: FormikProps<any>) => (\r\n            <Form>\r\n              <Field\r\n                name=\"email\"\r\n                margin=\"normal\"\r\n                placeholder=\"Email\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                autoComplete=\"email\"\r\n                autoFocus\r\n                component={FormTextField}\r\n              />\r\n              <Field\r\n                name=\"password\"\r\n                margin=\"normal\"\r\n                placeholder=\"password\"\r\n                required\r\n                fullWidth\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n                component={FormTextField}\r\n              />\r\n              <Tooltip\r\n                title=\"Refresh token will be stored in local storage\"\r\n                arrow\r\n              >\r\n                <FormControlLabel\r\n                  control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n                  label=\"Remember me\"\r\n                  value={rememberMe}\r\n                  onClick={clickHandler}\r\n                />\r\n              </Tooltip>\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.submit}\r\n                disabled={status === Action.pending}\r\n              >\r\n                {status === Action.pending ? <CircularProgress /> : \"Sign In\"}\r\n              </Button>\r\n\r\n              <Grid\r\n                container\r\n                justifyContent=\"center\"\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n              >\r\n                {status === Action.rejected && (\r\n                  <Grid item>\r\n                    <Typography variant=\"subtitle1\">{error}</Typography>\r\n                  </Grid>\r\n                )}\r\n                <Grid item>\r\n                  <Link\r\n                    variant=\"body2\"\r\n                    color=\"inherit\"\r\n                    component={RouterLink}\r\n                    to=\"/signup\"\r\n                  >\r\n                    Don't have an account? Sign Up\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport { Field, Form, Formik, FormikProps } from \"formik\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport * as yup from \"yup\";\r\nimport { FormTextField } from \"../../components/form-text-field/FormTextField\";\r\nimport { useAuth } from \"../../context/AuthProvider\";\r\nimport { Action } from \"../../hooks/useAsync\";\r\nimport { useStyles } from \"../shared/style\";\r\n\r\nconst validationSchema = yup.object({\r\n  name: yup.string().required(\"Name is required\"),\r\n  email: yup\r\n    .string()\r\n    .email(\"Enter a valid email\")\r\n    .required(\"Email is required\"),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"Password must contain atleast 8 characters\")\r\n    .required(\"Enter your password\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .required(\"Confirm your password\")\r\n    .oneOf([yup.ref(\"password\")], \"Password does not match\"),\r\n});\r\n\r\nconst SignUp = () => {\r\n  const classes = useStyles();\r\n  const { signUpUser, status, error } = useAuth();\r\n  let history = useHistory();\r\n\r\n  function submitHandler(email: string, password: string, name: string) {\r\n    signUpUser(email, password, name);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (status === Action.resolved) {\r\n      history.push(\"/todos\");\r\n    }\r\n  }, [status, history]);\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n        <Formik\r\n          initialValues={{\r\n            name: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            confirmPassword: \"\",\r\n          }}\r\n          onSubmit={(values) =>\r\n            submitHandler(values.email, values.password, values.name)\r\n          }\r\n          validationSchema={validationSchema}\r\n        >\r\n          {(props: FormikProps<any>) => (\r\n            <Form>\r\n              <Field\r\n                name=\"name\"\r\n                margin=\"normal\"\r\n                placeholder=\"Email\"\r\n                required\r\n                fullWidth\r\n                id=\"name\"\r\n                label=\"Name\"\r\n                autoFocus\r\n                component={FormTextField}\r\n              />\r\n              <Field\r\n                name=\"email\"\r\n                margin=\"normal\"\r\n                placeholder=\"Email\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                autoComplete=\"email\"\r\n                component={FormTextField}\r\n              />\r\n              <Field\r\n                name=\"password\"\r\n                margin=\"normal\"\r\n                placeholder=\"password\"\r\n                required\r\n                fullWidth\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                component={FormTextField}\r\n              />\r\n              <Field\r\n                name=\"confirmPassword\"\r\n                margin=\"normal\"\r\n                placeholder=\"password\"\r\n                required\r\n                fullWidth\r\n                label=\"Confirm Password\"\r\n                type=\"password\"\r\n                id=\"confirmpassword\"\r\n                component={FormTextField}\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.submit}\r\n                disabled={status === Action.pending}\r\n              >\r\n                {status === Action.pending ? <CircularProgress /> : \"Sign In\"}\r\n              </Button>\r\n              <Grid\r\n                container\r\n                justifyContent=\"center\"\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n              >\r\n                {status === Action.rejected && (\r\n                  <Grid item>\r\n                    <Typography variant=\"subtitle1\">{error}</Typography>\r\n                  </Grid>\r\n                )}\r\n                <Grid item>\r\n                  <Link\r\n                    variant=\"body2\"\r\n                    color=\"inherit\"\r\n                    component={RouterLink}\r\n                    to=\"/\"\r\n                  >\r\n                    Already have an account? Sign In\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n","import { CssBaseline, ThemeProvider } from \"@material-ui/core\";\nimport React, { Suspense } from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport ErrorFallback from \"./components/error-fallback/ErrorFallback\";\nimport FullPageSpinner from \"./components/full-page-spinner/FullPageSpinner\";\nimport Navbar from \"./components/navbar/Navbar\";\nimport PageNotFound from \"./components/page-not-found/PageNotFound\";\nimport PrivateRoute from \"./components/protected-route/PrivateRoute\";\nimport useToggleTheme from \"./hooks/useToggleTheme\";\nimport SignIn from \"./pages/sign-in/SignIn\";\nimport SignUp from \"./pages/sign-up/SignUp\";\n\nconst TodoList = React.lazy(() => import(\"./pages/todo-list/TodoList\"));\n\nfunction App() {\n  const { theme, isDarkMode, toggleHandler } = useToggleTheme();\n  return (\n    <ErrorBoundary\n      FallbackComponent={ErrorFallback}\n      onReset={() => {\n        localStorage.clear();\n        window.location.reload(false);\n      }}\n    >\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Navbar isDarkMode={isDarkMode} toggleHandler={toggleHandler} />\n        <Suspense fallback={<FullPageSpinner />}>\n          <Switch>\n            <Route exact path=\"/\">\n              <SignIn />\n            </Route>\n            <Route path=\"/signup\">\n              <SignUp />\n            </Route>\n            <PrivateRoute componentPath=\"/todos\" rederictToPath=\"/\">\n              <TodoList />\n            </PrivateRoute>\n            <Route path=\"/404\">\n              <PageNotFound />\n            </Route>\n            <Redirect to=\"/404\" />\n          </Switch>\n        </Suspense>\n      </ThemeProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { QueryClient, QueryClientProvider } from \"react-query\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from \"./App\";\nimport { AuthProvider } from \"./context/AuthProvider\";\n\nconst queryClient = new QueryClient();\n\nReactDOM.render(\n  <BrowserRouter basename=\"/todos\">\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <App />\n      </AuthProvider>\n    </QueryClientProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n","import { Reducer, useCallback, useReducer } from \"react\";\r\nimport useSafeDispatch from \"./useSafeDispatch\";\r\n\r\nexport enum Action {\r\n  pending = \"pending\",\r\n  resolved = \"resolved\",\r\n  rejected = \"rejected\",\r\n}\r\n\r\nenum Idle {\r\n  idle = \"idle\",\r\n}\r\n\r\nexport type Status = Action | Idle;\r\n\r\ntype ActionType<T> =\r\n  | {\r\n      type: Action.pending;\r\n    }\r\n  | {\r\n      type: Action.resolved;\r\n      data: T;\r\n    }\r\n  | {\r\n      type: Action.rejected;\r\n      error: string;\r\n    };\r\n\r\ntype StateType<T> = {\r\n  data: T | null;\r\n  status: Status;\r\n  error: string | null;\r\n};\r\n\r\nfunction asyncReducer<T>(\r\n  prevstate: StateType<T>,\r\n  action: ActionType<T>\r\n): StateType<T> {\r\n  switch (action.type) {\r\n    case Action.pending: {\r\n      return { status: Action.pending, data: null, error: null };\r\n    }\r\n    case Action.resolved: {\r\n      return { status: Action.resolved, data: action.data, error: null };\r\n    }\r\n    case Action.rejected: {\r\n      return { status: Action.rejected, data: null, error: action.error };\r\n    }\r\n    default: {\r\n      throw new Error(`Unhandled action type`);\r\n    }\r\n  }\r\n}\r\n\r\nconst useAsync = <T>(initialState: T) => {\r\n  const [state, unSafeDispatch] = useReducer<\r\n    Reducer<StateType<T>, ActionType<T>>\r\n  >(asyncReducer, {\r\n    status: Idle.idle,\r\n    data: initialState,\r\n    error: null,\r\n  });\r\n\r\n  const dispatch = useSafeDispatch(unSafeDispatch);\r\n\r\n  const { data, error, status } = state;\r\n\r\n  const runAsync = useCallback(\r\n    (promise: Promise<T>) => {\r\n      dispatch({ type: Action.pending });\r\n      promise.then(\r\n        (data) => {\r\n          dispatch({ type: Action.resolved, data });\r\n        },\r\n        (error) => {\r\n          dispatch({ type: Action.rejected, error });\r\n        }\r\n      );\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const setState = useCallback(\r\n    (data: T) => {\r\n      dispatch({ type: Action.resolved, data });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const setError = useCallback(\r\n    (error) => {\r\n      dispatch({ type: Action.rejected, error });\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  return {\r\n    error,\r\n    status,\r\n    data,\r\n    runAsync,\r\n    setState,\r\n    setError,\r\n  };\r\n};\r\n\r\nexport default useAsync;\r\n","import { Dispatch, useCallback, useLayoutEffect, useRef } from \"react\";\r\n\r\nconst useSafeDispatch = <T extends Dispatch<any>>(dispatch: T) => {\r\n  const mountedRef = useRef(false);\r\n\r\n  useLayoutEffect(() => {\r\n    mountedRef.current = true;\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  }, []);\r\n\r\n  return useCallback(\r\n    (...args: Parameters<T>) => {\r\n      mountedRef.current ? dispatch.call(null, ...args) : void 0;\r\n    },\r\n    [dispatch]\r\n  );\r\n};\r\n\r\nexport default useSafeDispatch;\r\n","export const tryCatch = async <T extends Promise<any>>(\r\n  promise: T\r\n): Promise<[any, any]> => {\r\n  try {\r\n    const data = await promise;\r\n    return [data, null];\r\n  } catch (error) {\r\n    return [null, error];\r\n  }\r\n};\r\n","import axios, { AxiosError, AxiosRequestConfig } from \"axios\";\r\nimport {\r\n  createContext,\r\n  ReactNode,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n} from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { tryCatch } from \"../helpers/asyncHelpers\";\r\nimport { localStorageService } from \"../helpers/localStorageService\";\r\nimport useAsync, { Status } from \"../hooks/useAsync\";\r\n\r\nexport const REFRESH_TOKEN_LOCAL_STORAGE = \"refreshToken\";\r\n\r\nconst signUpLoginInstance = axios.create({\r\n  baseURL: `${process.env.REACT_APP_AUTH_URL}`,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nconst login = (email: string, password: string) => {\r\n  return signUpLoginInstance\r\n    .post(\r\n      `/accounts:signInWithPassword?key=${process.env.REACT_APP_FIREBASE_KEY}`,\r\n      {\r\n        email,\r\n        password,\r\n        returnSecureToken: true,\r\n      }\r\n    )\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .catch((err) => {\r\n      return Promise.reject(err.message);\r\n    });\r\n};\r\n\r\nconst signUp = (email: string, password: string, displayName: string) => {\r\n  return signUpLoginInstance\r\n    .post(`/accounts:signUp?key=${process.env.REACT_APP_FIREBASE_KEY}`, {\r\n      email,\r\n      password,\r\n      displayName,\r\n      returnSecureToken: true,\r\n    })\r\n    .then((response) => response.data)\r\n    .catch((err) => Promise.reject(err.message));\r\n};\r\n\r\ninterface RefreshTokenResponse {\r\n  access_token: string;\r\n  expires_in: number;\r\n  id_token: string;\r\n  project_id: string;\r\n  refresh_token: string;\r\n  token_type: string;\r\n  user_id: string;\r\n}\r\n\r\nconst refreshToken = (refreshToken: string): Promise<RefreshTokenResponse> => {\r\n  return axios\r\n    .post(\r\n      `${process.env.REACT_APP_REFRESH_TOKEN_URL}`,\r\n      `grant_type=refresh_token&refresh_token=${refreshToken}`,\r\n      { headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" } }\r\n    )\r\n    .then((response) => response.data)\r\n    .catch((err) => Promise.reject(err));\r\n};\r\n\r\ninterface User {\r\n  idToken: string;\r\n  email: string;\r\n  refreshToken: string;\r\n  expiresIn: number;\r\n  localId: string;\r\n  displayName: string;\r\n  kind: string;\r\n  registered: boolean;\r\n}\r\n\r\ntype unionType = User | null;\r\n\r\ntype AuthContextType = {\r\n  error: string | null;\r\n  status: Status;\r\n  userData: unionType;\r\n  signUpUser: (email: string, password: string, displayName: string) => void;\r\n  loginUser: (email: string, password: string) => void;\r\n  logOutUser: () => void;\r\n  addTokenToHeader: (config: AxiosRequestConfig) => AxiosRequestConfig;\r\n  refreshTokenOn401: (error: AxiosError) => void;\r\n  isAuthenticated: boolean;\r\n};\r\n\r\nconst AuthContext = createContext<undefined | AuthContextType>(undefined);\r\n\r\nlet initialState: unionType;\r\ninitialState = null;\r\n\r\ntype AuthProviderPropsType = { children: ReactNode };\r\n\r\nexport const AuthProvider = ({ children }: AuthProviderPropsType) => {\r\n  const {\r\n    error,\r\n    status,\r\n    data: userData,\r\n    runAsync,\r\n    setState,\r\n    setError,\r\n  } = useAsync(initialState);\r\n  let history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const refresh = localStorageService.getItem(\r\n      REFRESH_TOKEN_LOCAL_STORAGE\r\n    ) as string;\r\n    if (refresh) {\r\n      refreshToken(refresh)\r\n        .then((res) => {\r\n          setState({\r\n            idToken: res.access_token,\r\n            email: \"\",\r\n            refreshToken: res.refresh_token,\r\n            expiresIn: res.expires_in,\r\n            localId: res.user_id,\r\n            displayName: \"\",\r\n            kind: \"\",\r\n            registered: true,\r\n          });\r\n          history.push(\"/todos\");\r\n        })\r\n        .catch((err) => {\r\n          localStorage.removeItem(REFRESH_TOKEN_LOCAL_STORAGE);\r\n          alert(\"Failed to refresh Token\");\r\n        });\r\n    }\r\n  }, [setState, history]);\r\n\r\n  function signUpUser(email: string, password: string, displayName: string) {\r\n    runAsync(signUp(email, password, displayName));\r\n  }\r\n\r\n  function loginUser(email: string, password: string) {\r\n    runAsync(login(email, password));\r\n  }\r\n\r\n  function logOutUser() {\r\n    localStorage.removeItem(REFRESH_TOKEN_LOCAL_STORAGE);\r\n    setError(\"Log out\");\r\n  }\r\n\r\n  const addTokenToHeader = useCallback(\r\n    (config: AxiosRequestConfig) => {\r\n      if (userData) {\r\n        config.url = `${config.url}?auth=${userData.idToken}`;\r\n      }\r\n      return config;\r\n    },\r\n    [userData]\r\n  );\r\n\r\n  const refreshTokenOn401 = useCallback(\r\n    async (error: AxiosError) => {\r\n      const code = error.response ? error.response.status : 0;\r\n      if (code === 401 && userData) {\r\n        const [resRefresh] = await tryCatch(\r\n          refreshToken(userData.refreshToken)\r\n        );\r\n\r\n        if (resRefresh) {\r\n          console.log(\"refresh true\", resRefresh);\r\n          setState({\r\n            ...userData,\r\n            idToken: resRefresh.access_token,\r\n            refreshToken: resRefresh.refresh_token,\r\n          });\r\n          const index = error.config.url?.lastIndexOf(\"auth=\");\r\n          error.config.url = `${error.config.url?.slice(0, index)}auth=${\r\n            resRefresh.id_token\r\n          }`;\r\n        }\r\n\r\n        const [resAxios] = await tryCatch(axios(error.config));\r\n        if (resAxios) {\r\n          return resAxios;\r\n        }\r\n      }\r\n      return Promise.reject(error);\r\n    },\r\n    [userData, setState]\r\n  );\r\n\r\n  const isAuthenticated = !!userData;\r\n\r\n  const value = {\r\n    error,\r\n    status,\r\n    userData,\r\n    signUpUser,\r\n    loginUser,\r\n    logOutUser,\r\n    addTokenToHeader,\r\n    refreshTokenOn401,\r\n    isAuthenticated,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(\"useAuth must be used within a AuthProvider\");\r\n  }\r\n\r\n  return context;\r\n}\r\n","import { TextField, TextFieldProps } from \"@material-ui/core\";\r\nimport { FieldProps, getIn } from \"formik\";\r\nimport React from \"react\";\r\n\r\ntype Props = FieldProps & TextFieldProps;\r\nexport const FormTextField = (props: Props) => {\r\n  const isTouched = getIn(props.form.touched, props.field.name);\r\n  const errorMessage = getIn(props.form.errors, props.field.name);\r\n\r\n  const { error, helperText, field, form, ...rest } = props;\r\n\r\n  return (\r\n    <TextField\r\n      variant=\"outlined\"\r\n      error={error ?? Boolean(isTouched && errorMessage)}\r\n      helperText={\r\n        helperText ?? (isTouched && errorMessage ? errorMessage : undefined)\r\n      }\r\n      {...rest}\r\n      {...field}\r\n    />\r\n  );\r\n};\r\n","class LocalStorageService {\r\n  setItem(key: string, value: any): void {\r\n    localStorage.setItem(key, JSON.stringify({ value }));\r\n  }\r\n\r\n  getItem<T>(key: string): T | null;\r\n  getItem<T>(key: string, otherwise: T): T;\r\n  getItem<T>(key: string, otherwise?: T): T | null {\r\n    const data: string | null = localStorage.getItem(key);\r\n    if (data !== null) {\r\n      return JSON.parse(data).value;\r\n    }\r\n\r\n    if (otherwise) {\r\n      return otherwise;\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nexport const localStorageService = new LocalStorageService();\r\n","import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n  fullpage: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n  },\r\n}));\r\n"],"sourceRoot":""}