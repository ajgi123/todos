(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[0],{30:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return g}));var r=n(67),a=n.n(r),c=n(65),i=n(12),o=n(93),s=n(94),l=n.n(s),u=n(0),d=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[null,e.t0]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),j=n(55),b=n(34),m=n(3),h="refreshToken",p=l.a.create({baseURL:"".concat("https://identitytoolkit.googleapis.com/v1/"),headers:{"Content-Type":"application/json"}}),f=function(e){return l.a.post("".concat("https://securetoken.googleapis.com/v1/token?key=AIzaSyB14rNS-GQZAuoDQDP9tWBZiGO3Cn318c8"),"grant_type=refresh_token&refresh_token=".concat(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.data})).catch((function(e){return Promise.reject(e)}))},O=Object(u.createContext)(void 0);var x=function(e){var t=e.children,n=Object(b.b)(null),r=n.error,s=n.status,x=n.data,g=n.runAsync,v=n.setState,w=n.setError;Object(u.useEffect)((function(){var e=j.a.getItem(h);e&&f(e).then((function(e){return e}))}),[]);var y=Object(u.useCallback)((function(e){return x&&(e.url="".concat(e.url,"?auth=").concat(x.idToken)),e}),[x]),k=Object(u.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,s,u,j,b,m,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==(t.response?t.response.status:0)||!x){e.next=15;break}return e.next=4,d(f(x.refreshToken));case 4:return n=e.sent,r=Object(i.a)(n,1),(o=r[0])&&(v(Object(c.a)(Object(c.a)({},x),{},{idToken:o.data.access_token,refreshToken:o.data.refresh_token})),j=null===(s=t.config.url)||void 0===s?void 0:s.lastIndexOf("auth="),t.config.url="".concat(null===(u=t.config.url)||void 0===u?void 0:u.slice(0,j),"auth=").concat(o.data.id_token)),e.next=10,d(l()(t.config));case 10:if(b=e.sent,m=Object(i.a)(b,1),!(h=m[0])){e.next=15;break}return e.abrupt("return",h);case 15:return e.abrupt("return",Promise.reject(t));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x,v]),S={error:r,status:s,userData:x,signUpUser:function(e,t,n){g(function(e,t,n){return p.post("/accounts:signUp?key=".concat("AIzaSyB14rNS-GQZAuoDQDP9tWBZiGO3Cn318c8"),{email:e,password:t,displayName:n,returnSecureToken:!0}).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.message)}))}(e,t,n))},loginUser:function(e,t){g(function(e,t){return p.post("/accounts:signInWithPassword?key=".concat("AIzaSyB14rNS-GQZAuoDQDP9tWBZiGO3Cn318c8"),{email:e,password:t,returnSecureToken:!0}).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.message)}))}(e,t))},logOutUser:function(){localStorage.removeItem(h),w("Log out")},addTokenToHeader:y,refreshTokenOn401:k,isAuthenticated:!!x};return Object(m.jsx)(O.Provider,{value:S,children:t})};function g(){var e=Object(u.useContext)(O);if(!e)throw new Error("useAuth must be used within a AuthProvider");return e}},316:function(e,t,n){},317:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),i=n.n(c),o=n(374),s=n(328),l=n(49),u=n(372),d=n(373),j=n(166),b=n(17),m=n(3),h=function(e){var t=e.error,n=e.resetErrorBoundary;return Object(m.jsxs)("div",{role:"alert",children:[Object(m.jsx)("p",{children:"Something went wrong:"}),Object(m.jsx)("pre",{children:t.message}),Object(m.jsx)("button",{onClick:n,children:"Try again"})]})},p=n(87),f=n(12),O=n(16),x=n(364),g=n(366),v=n(168),w=n(378),y=n(319),k=n(377),S=n(365),C=n(323),P=n(159),E=n.n(P),T=n(158),I=n.n(T),N=n(157),A=n.n(N),q=n(30),D=Object(y.a)((function(e){return Object(k.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(O.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"})})}));function W(e){var t=D(),n=Object(r.useState)(null),a=Object(f.a)(n,2),c=a[0],i=a[1],o=Object(q.c)(),s=o.isAuthenticated,l=o.userData,u=o.logOutUser,d=null===l||void 0===l?void 0:l.displayName,j=null===l||void 0===l?void 0:l.email,b=Boolean(c),h="primary-search-account-menu",p=Object(m.jsx)(v.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:h,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:function(){i(null)},children:Object(m.jsx)(w.a,{onClick:function(){u()},children:"Log out"})});return Object(m.jsxs)("div",{className:t.grow,children:[Object(m.jsx)(x.a,{position:"fixed",color:"default",children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(C.a,{className:t.title,variant:"h6",noWrap:!0,children:"Todo App"}),Object(m.jsx)("div",{className:t.grow}),Object(m.jsxs)("div",{children:[Object(m.jsx)(g.a,{onClick:e.toggleHandler,children:e.isDarkMode?Object(m.jsx)(A.a,{}):Object(m.jsx)(I.a,{})}),s&&Object(m.jsxs)(m.Fragment,{children:[d||j,Object(m.jsx)(g.a,{edge:"end","aria-label":"account of current user","aria-controls":h,"aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(m.jsx)(E.a,{})})]})]})]})}),p]})}var B=function(){var e=Object(p.b)();return Object(m.jsxs)("div",{className:e.fullpage,children:[Object(m.jsx)(C.a,{variant:"h2",children:"Page Not Found"}),Object(m.jsx)(C.a,{variant:"h1",children:"404"})]})},U=function(e){var t=e.children,n=e.componentPath,r=e.rederictToPath,a=Object(q.c)().isAuthenticated;return Object(m.jsx)(b.b,{path:n,render:function(e){var n=e.location;return a?t:Object(m.jsx)(b.a,{to:{pathname:r,state:{from:n}}})}})},z=n(167),G=n(55),R=function(e,t){var n=Object(r.useCallback)((function(){return G.a.getItem(e,t)}),[e,t]),a=Object(r.useState)(n),c=Object(f.a)(a,2),i=c[0],o=c[1];return Object(r.useEffect)((function(){o(n)}),[n]),Object(r.useEffect)((function(){G.a.setItem(e,i)}),[i,e]),[i,o]},Q=function(){var e=R("theme",!1),t=Object(f.a)(e,2),n=t[0],r=t[1],a=n?"dark":"light";return{isDarkMode:n,theme:Object(z.a)({palette:{type:a}}),toggleHandler:function(){r((function(e){return!e}))}}},Z=n(379),_=n(370),F=n(375),H=n(321),M=n(368),J=n(369),L=n(371),V=n(100),K=n.n(V),X=n(25),Y=n(36),$=n(52),ee=n(34),te=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(10),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ne=n(380),re=Y.a({email:Y.c().email("Enter a valid email").required("Email is required"),password:Y.c().min(8,"Password should be of minimum 8 characters length").required("Password is required")});function ae(){var e=te(),t=Object(q.c)(),n=t.loginUser,a=t.status,c=t.userData,i=t.error,o=Object(r.useState)(!1),s=Object(f.a)(o,2),u=s[0],d=s[1],j=Object(b.g)();function h(){d((function(e){return!e}))}return Object(r.useEffect)((function(){a===ee.a.resolved&&c&&(u&&c&&G.a.setItem(q.b,c.refreshToken),j.push("/todos"))}),[a,j,u,c]),Object(m.jsx)(M.a,{component:"main",maxWidth:"xs",children:Object(m.jsxs)("div",{className:e.paper,children:[Object(m.jsx)(Z.a,{className:e.avatar,children:Object(m.jsx)(K.a,{})}),Object(m.jsx)(C.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(m.jsx)(X.c,{initialValues:{email:"",password:""},onSubmit:function(e){return t=e.email,r=e.password,void n(t,r);var t,r},validationSchema:re,children:function(t){return Object(m.jsxs)(X.b,{children:[Object(m.jsx)(X.a,{name:"email",margin:"normal",placeholder:"Email",required:!0,fullWidth:!0,id:"email",label:"Email Address",autoComplete:"email",autoFocus:!0,component:$.a}),Object(m.jsx)(X.a,{name:"password",margin:"normal",placeholder:"password",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"current-password",component:$.a}),Object(m.jsx)(ne.a,{title:"Refresh token will be stored in local storage",arrow:!0,children:Object(m.jsx)(J.a,{control:Object(m.jsx)(F.a,{value:"remember",color:"primary"}),label:"Remember me",value:u,onClick:h})}),Object(m.jsx)(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:a===ee.a.pending,children:a===ee.a.pending?Object(m.jsx)(H.a,{}):"Sign In"}),Object(m.jsxs)(L.a,{container:!0,justifyContent:"center",direction:"column",alignItems:"center",children:[a===ee.a.rejected&&Object(m.jsx)(L.a,{item:!0,children:Object(m.jsx)(C.a,{variant:"subtitle1",children:i})}),Object(m.jsx)(L.a,{item:!0,children:Object(m.jsx)(l.b,{to:"/signup",children:"Don't have an account? Sign Up"})})]})]})}})]})})}var ce=Y.a({name:Y.c().required("Name is required"),email:Y.c().email("Enter a valid email").required("Email is required"),password:Y.c().min(8,"Password must contain atleast 8 characters").required("Enter your password"),confirmPassword:Y.c().required("Confirm your password").oneOf([Y.b("password")],"Password does not match")}),ie=function(){var e=te(),t=Object(q.c)(),n=t.signUpUser,a=t.status,c=t.error,i=Object(b.g)();return Object(r.useEffect)((function(){a===ee.a.resolved&&i.push("/todos")}),[a,i]),Object(m.jsx)(M.a,{component:"main",maxWidth:"xs",children:Object(m.jsxs)("div",{className:e.paper,children:[Object(m.jsx)(Z.a,{className:e.avatar,children:Object(m.jsx)(K.a,{})}),Object(m.jsx)(C.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(m.jsx)(X.c,{initialValues:{name:"",email:"",password:"",confirmPassword:""},onSubmit:function(e){return t=e.email,r=e.password,a=e.name,void n(t,r,a);var t,r,a},validationSchema:ce,children:function(t){return Object(m.jsxs)(X.b,{children:[Object(m.jsx)(X.a,{name:"name",margin:"normal",placeholder:"Email",required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0,component:$.a}),Object(m.jsx)(X.a,{name:"email",margin:"normal",placeholder:"Email",required:!0,fullWidth:!0,id:"email",label:"Email Address",autoComplete:"email",component:$.a}),Object(m.jsx)(X.a,{name:"password",margin:"normal",placeholder:"password",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",component:$.a}),Object(m.jsx)(X.a,{name:"confirmPassword",margin:"normal",placeholder:"password",required:!0,fullWidth:!0,label:"Confirm Password",type:"password",id:"confirmpassword",component:$.a}),Object(m.jsx)(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:a===ee.a.pending,children:a===ee.a.pending?Object(m.jsx)(H.a,{}):"Sign In"}),Object(m.jsxs)(L.a,{container:!0,justifyContent:"center",direction:"column",alignItems:"center",children:[a===ee.a.rejected&&Object(m.jsx)(L.a,{item:!0,children:Object(m.jsx)(C.a,{variant:"subtitle1",children:c})}),Object(m.jsx)(L.a,{item:!0,children:Object(m.jsx)(l.b,{to:"/login",children:"Already have an account? Sign In"})})]})]})}})]})})},oe=a.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,400))}));var se=function(){var e=Q(),t=e.theme,n=e.isDarkMode,a=e.toggleHandler;return Object(m.jsx)(j.ErrorBoundary,{FallbackComponent:h,onReset:function(){localStorage.clear(),window.location.reload(!1)},children:Object(m.jsxs)(u.a,{theme:t,children:[Object(m.jsx)(d.a,{}),Object(m.jsx)(W,{isDarkMode:n,toggleHandler:a}),Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{path:"/login",children:Object(m.jsx)(ae,{})}),Object(m.jsx)(b.b,{path:"/signup",children:Object(m.jsx)(ie,{})}),Object(m.jsx)(r.Suspense,{fallback:Object(m.jsx)(p.a,{}),children:Object(m.jsx)(U,{componentPath:"/todos",rederictToPath:"/login",children:Object(m.jsx)(oe,{})})}),Object(m.jsx)(b.b,{path:"*",children:Object(m.jsx)(B,{})})]})]})})},le=(n(316),new o.a);i.a.render(Object(m.jsx)(l.a,{basename:"/todos",children:Object(m.jsx)(s.a,{client:le,children:Object(m.jsx)(q.a,{children:Object(m.jsx)(se,{})})})}),document.getElementById("root"))},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a,c=n(12),i=n(0),o=function(e){var t=Object(i.useRef)(!1);return Object(i.useLayoutEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),Object(i.useCallback)((function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];t.current&&e.call.apply(e,[null].concat(r))}),[e])};function s(e,t){switch(t.type){case r.pending:return{status:r.pending,data:null,error:null};case r.resolved:return{status:r.resolved,data:t.data,error:null};case r.rejected:return{status:r.rejected,data:null,error:t.error};default:throw new Error("Unhandled action type")}}!function(e){e.pending="pending",e.resolved="resolved",e.rejected="rejected"}(r||(r={})),function(e){e.idle="idle"}(a||(a={}));t.b=function(e){var t=Object(i.useReducer)(s,{status:a.idle,data:e,error:null}),n=Object(c.a)(t,2),l=n[0],u=n[1],d=o(u),j=l.data;return{error:l.error,status:l.status,data:j,runAsync:Object(i.useCallback)((function(e){d({type:r.pending}),e.then((function(e){d({type:r.resolved,data:e})}),(function(e){d({type:r.rejected,error:e})}))}),[d]),setState:Object(i.useCallback)((function(e){d({type:r.resolved,data:e})}),[d]),setError:Object(i.useCallback)((function(e){d({type:r.rejected,error:e})}),[d])}}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(65),a=n(2),c=n(325),i=n(25),o=(n(0),n(3)),s=["error","helperText","field","form"],l=function(e){var t=Object(i.d)(e.form.touched,e.field.name),n=Object(i.d)(e.form.errors,e.field.name),l=e.error,u=e.helperText,d=e.field,j=(e.form,Object(a.a)(e,s));return Object(o.jsx)(c.a,Object(r.a)(Object(r.a)({variant:"outlined",error:null!==l&&void 0!==l?l:Boolean(t&&n),helperText:null!==u&&void 0!==u?u:t&&n?n:void 0},j),d))}},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(11),c=new(function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"setItem",value:function(e,t){localStorage.setItem(e,JSON.stringify({value:t}))}},{key:"getItem",value:function(e,t){var n=localStorage.getItem(e);return null!==n?JSON.parse(n).value:t||null}}]),e}())},87:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(321),a=n(319),c=n(3),i=Object(a.a)((function(e){return{fullpage:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"}}}));t.a=function(){var e=i();return Object(c.jsx)("div",{className:e.fullpage,children:Object(c.jsx)(r.a,{size:100})})}}},[[317,1,2]]]);
//# sourceMappingURL=main.4890d110.chunk.js.map